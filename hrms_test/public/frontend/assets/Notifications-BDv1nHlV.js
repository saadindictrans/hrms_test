import{_ as j,I,a as B}from"./index-CEKosOWR.js";import{c as V,O as R,A as i,n as o,v as e,i as b,ab as S,f as k,j as n,l,q as t,x as _,t as c,k as m,a5 as p,y as w,F as A,I as D,J as z}from"./frappe-ui-qLvTFYQB.js";import L from"./EmployeeAvatar-C8o_82kt.js";import{n as d,a as M,u as f}from"./notifications-W5tSfcNs.js";const P={class:"flex flex-col h-screen w-screen"},T={class:"w-full sm:w-96"},E={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},F={class:"flex flex-row items-center"},H={class:"text-xl font-semibold text-gray-900"},q={class:"flex flex-col gap-4 mt-5 p-4"},J={class:"flex flex-row justify-between items-center"},O={key:0,class:"text-lg text-gray-800 font-semibold"},U={class:"flex ml-auto gap-1"},Y={key:0,class:"flex flex-col bg-white rounded"},G={class:"flex flex-col gap-0.5 grow ml-3"},K=["innerHTML"],Q={class:"text-xs font-normal text-gray-500"},ae={__name:"Notifications",setup(W){b("$user");const v=b("$dayjs"),x=S(),y=V(()=>{var s;return((s=window.frappe)==null?void 0:s.boot.push_relay_server_url)&&M.data}),g=R({url:"hrms.api.mark_all_notifications_as_read",onSuccess(){d.reload()}});function C(s){d.setValue.submit({name:s,read:1},{onSuccess:()=>{f.reload()}})}function N(s){return{name:`${s.reference_document_type.replace(/\s+/g,"")}DetailView`,params:{id:s.reference_document_name}}}return(s,r)=>{const u=k("Button"),$=k("router-link");return n(),i(e(B),null,{default:o(()=>[l(e(I),{class:"ion-padding"},{default:o(()=>{var h;return[t("div",P,[t("div",T,[t("header",E,[t("div",F,[l(u,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:r[0]||(r[0]=a=>e(x).back())},{default:o(()=>[l(e(_),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),t("h2",H,c(s.__("Notifications")),1)])]),t("div",q,[t("div",J,[e(f).data?(n(),m("div",O,c(e(f).data)+" Unread ",1)):p("",!0),t("div",U,[y.value?(n(),i(u,{key:0,variant:"outline",onClick:r[1]||(r[1]=a=>e(x).push({name:"Settings"}))},{prefix:o(()=>[l(e(_),{name:"settings",class:"w-4"})]),default:o(()=>[r[2]||(r[2]=w(" Settings "))]),_:1})):p("",!0),e(f).data?(n(),i(u,{key:1,variant:"outline",onClick:e(g).submit,loading:e(g).loading},{prefix:o(()=>[l(e(_),{name:"check-circle",class:"w-4"})]),default:o(()=>[w(" "+c(s.__("Mark all as read")),1)]),_:1},8,["onClick","loading"])):p("",!0)])]),(h=e(d).data)!=null&&h.length?(n(),m("div",Y,[(n(!0),m(A,null,D(e(d).data,a=>(n(),i($,{class:z(["flex flex-row items-start p-4 justify-between border-b before:mt-3","before:content-[''] before:mr-2 before:shrink-0 before:w-1.5 before:h-1.5 before:rounded-full",a.read?"bg-white-500":"before:bg-blue-500"]),key:a.name,to:N(a),onClick:X=>C(a.name)},{default:o(()=>[l(L,{userID:a.from_user,size:"lg"},null,8,["userID"]),t("div",G,[t("div",{class:"text-sm leading-5 font-normal text-gray-800",innerHTML:a.message},null,8,K),t("div",Q,c(e(v)(a.creation).fromNow()),1)])]),_:2},1032,["class","to","onClick"]))),128))])):(n(),i(j,{key:1,message:"You have no notifications"}))])])])]}),_:1})]),_:1})}}};export{ae as default};
//# sourceMappingURL=Notifications-BDv1nHlV.js.map
