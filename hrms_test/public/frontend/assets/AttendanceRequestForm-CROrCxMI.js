import{I as h,a as F}from"./index-CEKosOWR.js";import{i as R,a as V,O as g,w as n,j as m,A as i,n as u,l as q,v as d,a5 as b}from"./frappe-ui-qLvTFYQB.js";import A from"./FormView-BRqGWGvk.js";import"./FormField-BCSqEHey.js";import"./Link-QcSLzh7C.js";import"./FileUploaderView-6mxw9ReX.js";import"./workflow-DLGjdWDd.js";import"./formatters-Ct4yxM4M.js";const N={__name:"AttendanceRequestForm",props:{id:{type:String,required:!1}},setup(f){const s=R("$employee"),l=f,t=V({}),o=g({url:"hrms.api.get_doctype_fields",params:{doctype:"Attendance Request"},auto:!0,transform(e){return l.id?e:e.filter(a=>!["employee","employee_name","status","company"].includes(a.fieldname))}});n(()=>t.value.employee,e=>{l.id&&e!==s.data.name&&c()}),n(()=>t.value.from_date,e=>{t.value.to_date||(t.value.to_date=e)}),n(()=>[t.value.from_date,t.value.to_date],([e,a])=>{p(e,a)}),n(()=>t.value.half_day,e=>{const a=o.data.find(r=>r.fieldname==="half_day_date");a.hidden=!e});function c(){o.data.map(e=>e.read_only=!0)}function p(e,a){if(!(e&&a))return;const r=e>a?"To Date cannot be before From Date":"",y=o.data.find(v=>v.fieldname==="from_date");y.error_message=r}function _(){t.value.employee=s.data.name}return(e,a)=>(m(),i(d(F),null,{default:u(()=>[q(d(h),{fullscreen:!0},{default:u(()=>[d(o).data?(m(),i(A,{key:0,doctype:"Attendance Request",modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=r=>t.value=r),isSubmittable:!0,fields:d(o).data,id:l.id,onValidateForm:_},null,8,["modelValue","fields","id"])):b("",!0)]),_:1})]),_:1}))}};export{N as default};
//# sourceMappingURL=AttendanceRequestForm-CROrCxMI.js.map
